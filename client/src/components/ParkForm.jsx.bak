import React, { Component } from "react";

class ParkForm extends Component {
	state = {
		reqData: []
	};

	handleSubmit = event => {
		event.preventDefault();
		const formData = new FormData(event.target);
		console.log(formData);
		console.log(Object.fromEntries(formData));
		const data = JSON.stringify(Object.fromEntries(formData));
		this.setState({ reqData: data });
		// fetch('/api/form-submit-url', {
		//   method: 'POST',
		//   body: data,
		// });
	};

	handleClear = () => {
		document.getElementById("search-data-form").reset();
		this.props.onClear();
	};

	render() {
		console.log("ParksComponent - rendered");
		const parks = this.state.parks;
		// var reqData = {
		// 	lat: 43.25542,
		// 	lng: -79.881315,
		// 	dist: 50,
		// 	lightpol: 2
		// };
		//let clearButtonClass = this.clearButtonClass();

		return (
			<div
				className="border border-primary rounded p-3"
				style={{ maxWidth: 600 }}
			>
				<form id="search-data-form" onSubmit={this.handleSubmit}>
					<input
						id="latitude"
						className="form-control mb-1"
						name="lat"
						type="number"
						min={-90}
						max={90}
						placeholder="Latitude"
						required
					/>
					<input
						id="longitude"
						className="form-control mb-1"
						name="lng"
						type="number"
						min={-180}
						max={180}
						placeholder="Longitude"
						required
					/>
					<div className="form-check text-left mb-1 ml-2">
						<input
							className="form-check-input"
							type="radio"
							id="loc1"
							value="5"
							name="dist"
							required
						/>
						<label className="form-check-label" for="loc1">
							less than 5 km
						</label>
						<br />
						<input
							className="form-check-input"
							type="radio"
							id="loc2"
							value="25"
							name="dist"
							checked
						/>
						<label className="form-check-label" for="loc2">
							less than 25 km
						</label>
						<br />
						<input
							className="form-check-input"
							type="radio"
							id="loc3"
							value="50"
							name="dist"
						/>
						<label className="form-check-label" for="loc3">
							less than 50 km
						</label>
						<br />
						<input
							className="form-check-input"
							type="radio"
							id="loc4"
							value="100"
							name="dist"
						/>
						<label className="form-check-label" for="loc4">
							less than 100 km
						</label>
						<br />
						<input
							className="form-check-input"
							type="radio"
							id="loc5"
							value="200"
							name="dist"
						/>
						<label className="form-check-label" for="loc5">
							less than 200 km
						</label>
						<br />
						<input
							className="form-check-input"
							type="radio"
							id="loc6"
							value="300"
							name="dist"
						/>
						<label className="form-check-label" for="loc6">
							less than 300 km
						</label>
						<br />
					</div>
					<input
						id="lightpol"
						className="form-control mb-1"
						name="lightpol"
						type="number"
						min={0}
						max={40}
						placeholder="Max Light Pollution"
						value={2}
						required
					/>
					<button
						// onClick={this.getParks.bind(this, reqData)}
						className="btn btn-primary btn-sm m-2"
						type="submit"
					>
						<strong>Get parks</strong>
					</button>
					<button
						onClick={this.handleClear}
						className="btn btn-danger btn-sm m-2"
						//className={this.clearButtonClass()}
						//disabled={this.state.parks.length === 0}
						type="button"
					>
						<strong>Clear</strong>
					</button>
				</form>
				{this.state.reqData}
			</div>
		);
	}
}

export default ParkForm;
