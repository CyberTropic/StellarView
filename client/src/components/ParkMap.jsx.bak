//Displays parks google map
import React, { Component, createRef } from "react";
import { Map, GoogleApiWrapper, InfoWindow, Marker } from "google-maps-react";

class ParkMap extends Component {
	state = {
		showingInfoWindow: false, //Hides or the shows the infoWindow
		activeMarker: {}, //Shows the active marker upon click
		selectedPlace: {} //Shows the infoWindow to the selected place upon a marker
	};
	onMarkerClick = (props, marker, e) =>
		this.setState({
			selectedPlace: props,
			activeMarker: marker,
			showingInfoWindow: true
		});

	onClose = props => {
		if (this.state.showingInfoWindow) {
			this.setState({
				showingInfoWindow: false,
				activeMarker: null
			});
		}
	};

	// googleMapRef = createRef();

	// componentDidMount() {
	// 	const googleMapScript = document.createElement("script");
	// 	//NOTE: Find a better way to secure the api key
	// 	googleMapScript.src = `https://maps.googleapis.com/maps/api/js?key=${}`;
	// 	console.log(process.env.DUSTINMAPKEY);
	//     window.document.body.appendChild(googleMapScript);
	//     googleMapScript.addEventListener('load', this.createGoogleMap())
	// }

	// createGoogleMap = () => {
	// 	new window.google.maps.Map(this.googleMapRef.current, {
	// 		zoom: 10,
	// 		center: {
	// 			lat: 43.64,
	// 			lng: -79.38
	// 		}
	// 		// disableDefaultUI: true
	// 	});
	// };

	render() {
		// const mapStyles = {
		// 	width: "100%",
		// 	height: "100%"
		// };
		return (
			// <div
			// 	ref={this.googleMapRef}
			// 	className="border border-primary"
			// 	style={{ width: "600px", height: "400px" }}
			// />
			<div>
				<Map
					google={this.props.google}
					zoom={10}
					// style={mapStyles}
					initialCenter={{
						lat: 43.64,
						lng: -79.38
					}}
					disableDefaultUI="true"
				>
					<Marker
						onClick={this.onMarkerClick}
						name={"Kenyatta International Convention Centre"}
					/>
					<InfoWindow
						marker={this.state.activeMarker}
						visible={this.state.showingInfoWindow}
						onClose={this.onClose}
					>
						<div>
							<h4>{this.state.selectedPlace.name}</h4>
						</div>
					</InfoWindow>
				</Map>
			</div>
		);
	}
}

// export default ParkMap;
export default GoogleApiWrapper({
	apiKey: process.env.REACT_APP_DUSTINMAPKEY
})(ParkMap);
